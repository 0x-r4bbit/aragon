<template name="Module_Ownership_AssignShares">
  {{> Element_ProcessDimmer}}
  {{> Element_CloseSectionButton }}
  <form class="ui flex attached form" id="assignShares">
    <h1 class="ui header">Assign shares</h1>
    <div class="ui hidden divider"></div>
    <div class="field">
      <label>Recipient</label>
      {{> Element_IdentityAutocomplete}}
    </div>
    <div class="field">
      <label>Kind</label>
      <div class="ui selection dropdown">
        <input type="hidden" name="kind">
        <i class="dropdown icon"></i>
        <div class="default text">Kind of shares</div>
        <div class="menu">
          {{#each stocks}}
          <div class="item" data-value="{{index}}">{{name}} ({{symbol}})</div>
          {{/each}}
        </div>
      </div>
    </div>
    <div class="field">
      <label>Number</label>
      <input type="number" lang="en" name="number" placeholder="Number of shares" min="0">
    </div>
    <div class="ui hidden divider"></div>
    <div class="ui toggle checkbox">
      <input type="checkbox" id="stockGrant">
      <label>Vesting calendar</label>
    </div>
    {{ #unless TemplateVar.get 'assignMode' }}
    <div class="ui hidden divider"></div>
    <div class="field">
      <div class="two fields">
        <div class="field">
          <label>Cliff date</label>
          <input type="date" name="cliff">
        </div>
        <div class="field">
          <label>Vesting date</label>
          <input type="date" name="vesting">
        </div>
      </div>
    </div>
    {{ /unless }}
    <div class="ui spacer"></div>
    {{ #if TemplateVar.get 'assignMode' }}
    {{ #if $exists (TemplateVar.get 'selectedStock') }}
    <div class="ui icon small message">
      <i class="info icon"></i>
      <div class="content">
        <div class="header">
          There are {{ availableShares (TemplateVar.get 'selectedStock') }} issued shares to assign
        </div>
        <p>
          Assigning these shares doesn't require a voting.
        </p>
      </div>
    </div>
    {{ /if }}
    {{ else }}
    <div class="ui icon small message">
      <i class="info icon"></i>
      <div class="content">
        <div class="header">
          Creating a stock grant requires a voting.
        </div>
        <p>
          When approved, granted stock will be issued and assigned with the vesting calendar specified.
        </p>
      </div>
    </div>
    {{ /if }}
    <button class="ui fluid big primary button" type="submit">Assign</button>
  </form>
</template>
