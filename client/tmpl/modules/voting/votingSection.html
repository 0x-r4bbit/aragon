<template name="Module_Voting_Section">
  {{> Element_ProcessDimmer}}
  {{> Element_CloseSectionButton href='/voting'}}
  <div class="ui attached flex container" id="votingSection">
    {{#with voting}}
    <h1 class="ui header">
      {{title}}
      <a class="ui violet label">Requires {{ percentFormat supportNeeded }} support</a>
      <a class="ui left pointing red basic label">Ends in {{ timeRange now closingTime }}</a>
      <div class="sub header">{{description}}</div>
    </h1>

    <table id="optionsTable" class="ui very basic selectable striped padded fixed table">
      <thead>
        <tr>
          <th>Option</th>
          <th>Votes</th>
          <th>Percentaje</th>
        </tr>
      </thead>
      <tbody>
        {{ #each options }}
        <tr data-option="{{ @index }}">
          <td>
            {{ this }}
          </td>
          {{#with countVotes @index voteId updatesHack }}
          <td>
            {{ votes }}
          </td>
          <td>
            {{ percentFormat relativeVotes }}
          </td>
          {{/with}}
        </tr>
        {{/each}}
        <tr>
          <td>Pending votes</td>
          {{#with pendingVotes options updatesHack }}
          <td>{{Â votes }}</td>
          <td>{{ percentFormat relativeVotes }}</td>
          {{/with}}
        </tr>
      </tbody>
    </table>

    <div class="ui spacer"></div>

    <div class="ui buttons">
      {{#if canVote}}
      {{#each options}}
      <button data-option="{{@index}}" class="ui {{#if equals @index (plus options.length -1)}} negative {{else}} positive {{/if}} button">{{this}}</button>
      {{#unless equals @index (plus options.length -1) }}
        <div class="or"></div>
      {{/unless}}
      {{/each}}
      {{/if }}
    </div>
    {{/with}}
  </div>
</template>
