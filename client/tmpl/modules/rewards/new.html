<template name="Module_Rewards_New">
  {{> Element_ProcessDimmer}}
  {{> Element_CloseSectionButton href='/rewards'}}
  <form class="ui flex attached form" id="newReward">
    <h1 class="ui header">New reward</h1>
    <div class="ui hidden divider"></div>
    <div class="field">
      <label>Recipient</label>
      {{ > Element_IdentityAutocomplete }}
    </div>
    <div class="field">
      <label>Amount</label>
      {{ > Element_CurrencyAmount name='rewardAmount' placeholder='Amount' min=(ether 1) step='0.0000000000000000001' }}
    </div>
    <div class="ui hidden divider"></div>
    <div class="ui toggle checkbox">
      <input type="checkbox" id="recurrent">
      <label>Recurrent</label>
    </div>
    {{ #if TemplateVar.get 'isRecurrent' }}
    <div class="ui hidden divider"></div>
    <div class="field">
      <label>Repeat every</label>
      <div class="two fields">
        <div class="field">
          <input type="number" name="repeatNumber" value="0">
        </div>
        <div class="field">
          <div class="ui selection dropdown">
            <input type="hidden" name="repeatInterval">
            <i class="dropdown icon"></i>
            <div class="default text">Repeat every</div>
            <div class="menu">
              <div class="item" data-value="day">Day</div>
              <div class="item" data-value="week">Week</div>
              <div class="item" data-value="month">Month</div>
              <div class="item" data-value="year">Year</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    {{ /if }}
    <div class="ui hidden divider"></div>
    <div class="ui toggle checkbox">
      <input type="checkbox" id="debitCard">
      <label>Fill VISA debit card</label>
    </div>
    {{ #if TemplateVar.get 'isCard' }}
    <div class="ui hidden divider"></div>
    <div class="field">
      <div class="two fields">
        <div class="field">
          <label>Currency</label>
          <div class="ui selection dropdown">
            <input type="hidden" name="currency" value="USD">
            <i class="dropdown icon"></i>
            <div class="default text"></div>
            <div class="menu">
              <div class="item" data-value="USD">USD</div>
              <div class="item" data-value="EUR">EUR</div>
            </div>
          </div>
        </div>
        <div class="field">
          <label>Type</label>
          <div class="ui selection dropdown" id="debitCardType">
            <input type="hidden" name="type" value="virtual">
            <i class="dropdown icon"></i>
            <div class="default text"></div>
            <div class="menu">
              <div class="selected item" data-value="virtual">Virtual</div>
              <div class="item" data-value="physical">Physical</div>
            </div>
          </div>
        </div>
      </div>
    </div>
    {{ #if TemplateVar.get 'isVirtualCard' }}
      <div class="ui toggle checkbox" id="anonDebitCard">
        <input type="checkbox" checked="checked">
        <label>Anonimize debit card details</label>
      </div>
      <div class="ui hidden divider"></div>
      {{ #unless TemplateVar.get 'anonDebitCard' }}
        {{ > Module_Rewards_ShakeUserInfo }}
      {{ /unless }}
    {{ else }}
      {{ > Module_Rewards_ShakeUserInfo }}
    {{ /if }}
    {{ /if }}
    <div class="ui spacer"></div>
    <div class="ui icon small message">
      <i class="info icon"></i>
      <div class="content">
        <div class="header">There is {{Â ether remainingBudget }} ETH in this period budget (period closes in {{ timeRange now periodCloses }})</div>
        <p>If reward would go over-budget, please change settings.</p>
      </div>
    </div>
    <button class="ui fluid big primary button" type="submit">Issue reward</button>
    <div class="ui hidden divider"></div>
  </form>
</template>
